## for NATS service configuration see #scripts/nats-bootstrap/values-nats.yaml.tmpl

location: sandbox

serverservice:
  image:
    repository: "localhost:5001/serverservice"
    tag: latest
    pullPolicy: Always
  nats:
    publishStreamPrefix: com.hollow.sh.serverservice.events

conditionorc:
  env:
    NATS_URL: "nats://nats:4222"
    NATS_CONNECT_TIMEOUT: 60s
    SERVERSERVICE_ENDPOINT: http://serverservice:8000
    SERVERSERVICE_DISABLE_OAUTH: true
    # uncomment once oauth service is available in sandbox
    #SERVERSERVICE_OIDC_AUDIENCE_ENDPOINT:
    ## trailing forward slash is required.
    #SERVERSERVICE_OIDC_ISSUER_ENDPOINT:
    #SERVERSERVICE_OIDC_CLIENT_ID: conditionorc-api
    #SERVERSERVICE_OIDC_CLIENT_SCOPES: "read:server create:server:attributes update:server:attributes delete:server:attributes"
    ## telemetry configuration
    OTEL_EXPORTER_OTLP_ENDPOINT: jaeger:4317
    OTEL_EXPORTER_OTLP_INSECURE: true
  image:
    repository: "localhost:5001/conditionorc"
    tag: latest
    pullPolicy: Always

flasher:
  env:
    NATS_URL: "nats://nats:4222"
    NATS_CONNECT_TIMEOUT: 60s
    SERVERSERVICE_ENDPOINT: http://serverservice:8000
    SERVERSERVICE_DISABLE_OAUTH: true
    # to uncomment once oauth service is availble in sandbox
    # SERVERSERVICE_OIDC_AUDIENCE_ENDPOINT:
    # SERVERSERVICE_OIDC_ISSUER_ENDPOINT:
    # SERVERSERVICE_OIDC_CLIENT_ID: flasher
    # SERVERSERVICE_OIDC_CLIENT_SCOPES: "read:server read:server:credentials read:server:component read:server:versioned-attributes read:server-component-firmwares read:server-component-firmware-sets"
    # # telemetry configuration
    OTEL_EXPORTER_OTLP_ENDPOINT: jaeger:4317
    OTEL_EXPORTER_OTLP_INSECURE: true
  image:
    repository: "localhost:5001/flasher"
    tag: latest
    pullPolicy: Always

alloy:
  image:
    repository: "localhost:5001/alloy"
    tag: latest
    pullPolicy: Always
  env:
    ALLOY_SERVERSERVICE_ENDPOINT: http://serverservice:8000
    ALLOY_SERVERSERVICE_DISABLE_OAUTH: true
    ALLOY_NATS_URL: "nats://nats:4222"
    # telemetry configuration
    OTEL_EXPORTER_OTLP_ENDPOINT: jaeger:4317
    OTEL_EXPORTER_OTLP_INSECURE: true

syncer:
  schedule: '"00 08 * * *"'
  image:
    repository: "localhost:5001/firmware-syncer"
    tag: latest
    pullPolicy: Always
  env:
    SYNCER_SERVERSERVICE_ENDPOINT: http://serverservice:8000
    SYNCER_SERVERSERVICE_DISABLE_OAUTH: true
    SYNCER_S3_REGION: "us-east-1"
    SYNCER_S3_ENDPOINT: "s3.amazonaws.com"
    SYNCER_S3_BUCKET: "some-bucket"
    SYNCER_S3_ACCESS_KEY: redacted
    SYNCER_S3_SECRET_KEY: redacted
    SYNCER_ASRR_S3_REGION: "us-east-2"
    SYNCER_ASRR_S3_ENDPOINT: "s3.amazonaws.com"
    SYNCER_ASRR_S3_BUCKET: "another-bucket"
    SYNCER_ASRR_S3_ACCESS_KEY: redacted
    SYNCER_ASRR_S3_SECRET_KEY: redacted
    SYNCER_GITHUB_OPENBMC_TOKEN: redacted

crdb:
  image: cockroachdb/cockroach:latest-v21.1

chaos-mesh:
  enabled: false

#https://github.com/chaos-mesh/chaos-mesh/tree/master/helm/chaos-mesh
controllerManager:
  leaderElection:
    enabled: false
dashboard:
  securityMode: false
chaosDaemon:
  runtime: containerd
  socketPath: /run/containerd/containerd.sock
